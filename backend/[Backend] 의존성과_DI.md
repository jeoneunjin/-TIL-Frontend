# ðŸ“ DI í•™ìŠµ ìš”ì•½

## ðŸ“š ëª©ì°¨

---

## 1. ì˜ì¡´ì  DI (Dependency Injection)

### 1-1. DI, ì˜ì¡´ ê´€ê³„, ê·¸ë¦¬ê³  ì œì–´ì˜ ì—­ì „ (IoC)

| ê°œë… | ì„¤ëª… | í•µì‹¬ í‚¤ì›Œë“œ | ë¹„ìœ  (ìƒí™œ/Spring) |
|:---|:---|:---|:---|
| **DI** (ì˜ì¡´ì„± ì£¼ìž…) | ê°ì²´ì˜ **ì˜ì¡´ì„±(ë©¤ë²„ ë³€ìˆ˜)**ì„ ì™¸ë¶€ì—ì„œ **ì£¼ìž…**í•˜ëŠ” ê²ƒ. | ì™¸ë¶€ ì£¼ìž…, ë©¤ë²„ ë³€ìˆ˜ ì„¤ì • | ì„¸íƒê¸° **ëžœíƒˆ** |
| **ë¹ˆ (Bean)** | Spring Frameworkì— ì˜í•´ **ìƒì„±ë˜ê³  ê´€ë¦¬ë˜ëŠ”** ìžë°” ê°ì²´. | ìŠ¤í”„ë§ ê´€ë¦¬ ê°ì²´ | ì„¸íƒê¸° |
| **ì˜ì¡´ ê´€ê³„** | ì–´ë–¤ ê°ì²´ê°€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬ë¥¼ ìœ„í•´ ë‹¤ë¥¸ ê°ì²´ì— ì˜ì¡´í•˜ëŠ” ê´€ê³„ (**has-a** ê´€ê³„). | has-a ê´€ê³„, ë¡œì§ ì²˜ë¦¬ | ë¹¨ëž˜í•˜ëŠ” ì‚¬ëžŒ â†’ ì„¸íƒê¸° |
| **IoC** (ì œì–´ì˜ ì—­ì „) | ê°ì²´ì˜ ìƒì„±, ì˜ì¡´ ê´€ê³„ ì„¤ì •, ìƒëª…ì£¼ê¸° ê´€ë¦¬ ë“± **ê°ì²´ ì œì–´ ê¶Œí•œ**ì´ ê°œë°œìž â†’ **Spring ì»¨í…Œì´ë„ˆ**ë¡œ ë„˜ì–´ê°€ëŠ” ê²ƒ. | ì œì–´ê¶Œ ì „í™˜, Spring ì²˜ë¦¬ | ë ŒíƒˆíšŒì‚¬ â‰ˆ IoC ì»¨í…Œì´ë„ˆ |

#### ðŸ¡ DI (ì˜ì¡´ì„± ì£¼ìž…)ì˜ ìƒí™œ ì† ë¹„ìœ 

| Spring ê°œë… | ìƒí™œ ì† í–‰ìœ„ | ì„¤ëª… | í•µì‹¬ í‚¤ì›Œë“œ |
|:---|:---|:---|:---|
| **ì˜ì¡´ì„±** | ì„¸íƒê¸° (ë¹¨ëž˜ë¼ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— í•„ìš”) | ì‚¬ìš©í•˜ë ¤ëŠ” ëŒ€ìƒ ê°ì²´ | Has-a ê´€ê³„ |
| **ìƒì„±** (ê°œë°œìž ì§ì ‘ ê´€ë¦¬) | **ì„¸íƒê¸° êµ¬ë§¤** | ì‚¬ìš©ìžê°€ ì§ì ‘ ê°ì²´ë¥¼ ë§Œë“¤ê³ (new) ê´€ë¦¬í•˜ëŠ” ê²ƒ. (DI ë¯¸ì ìš©) | ì§ì ‘ ìƒì„±/ê´€ë¦¬ |
| **ì£¼ìž…** (DI) | **ì„¸íƒê¸° ëžœíƒˆ** (ë˜ëŠ” ì„œë¹„ìŠ¤ ì´ìš©) | ì‚¬ìš©ìžê°€ ì§ì ‘ ë§Œë“¤ì§€ ì•Šê³ , ì™¸ë¶€(ë Œíƒˆ íšŒì‚¬/ì»¨í…Œì´ë„ˆ)ì—ì„œ ê°ì²´ë¥¼ **ì œê³µë°›ì•„** ì‚¬ìš©í•˜ëŠ” ê²ƒ. | ì™¸ë¶€ ì£¼ìž…/ì œê³µ |

---

### 1-2. ì˜ì¡´ ê´€ê³„ì™€ DI

#### ìŠ¤í”„ë§ì˜ ë¹ˆ(Bean)ì´ëž€? 
- ìŠ¤í”„ë§ í”„ë ˆìž„ì›Œí¬ì— ì˜í•´ **ìƒì„±ë˜ê³  ê´€ë¦¬ë˜ëŠ”** ìžë°” ê°ì²´
- ìŠ¤í”„ë§ì€ ë¹ˆì˜ ìƒì„±, ì˜ì¡´ ê´€ê³„ ì„¤ì •, ê°ì²´ ê´€ë¦¬ ë“± ë¹ˆì˜ ë¼ì´í”„ ì‚¬ì´í´ì„ ê´€ë¦¬
    - ìŠ¤í”„ë§ì„ ë¹ˆì˜ ì»¨í…Œì´ë„ˆë¼ê³  í•¨

#### ì˜ì¡´ ê´€ê³„ëž€?
- ì–´ë–¤ ê°ì²´(ë¹ˆ)ê°€ ë¹„ì§€ë‹ˆìŠ¤ë¡œì§ ì²˜ë¦¬ë¥¼ ìœ„í•´ ë‹¤ë¥¸ ê°ì²´(ë¹ˆ)ì— ì˜ì¡´í•˜ëŠ” ê´€ê³„
- ê°ì²´ ê° has-a ê´€ê³„

- ì˜ì¡´ ê´€ê³„ ê´€ë¦¬ë¥¼ ìœ„í•´ DI ê°œë…ì„ ì‚¬ìš©í•˜ë©° ì´ ê³¼ì •ì—ì„œ **ì œì–´ì˜ ì—­ì „**ì´ ë°œìƒ
    - ìŠ¤í”„ë§ì„ IoC(ì œì–´ì˜ ì—­ì „; Inversion Of Control) ì»¨í…Œì´ë„ˆë¼ê³  ë¶ˆë¦¼
    - ë ŒíƒˆíšŒì‚¬ = IoC ì»¨í…Œì´ë„ˆ

#### ðŸ› ï¸ DIì˜ í•„ìš”ì„± ë° Spring ë“±ìž¥

| ë‹¨ê³„ | ë¬¸ì œì  | í•´ê²° ë°©ì•ˆ | ê²°ê³¼ |
|:---|:---|:---|:---|
| 1. ì§ì ‘ ìƒì„±/ì‚¬ìš© | ê°ì²´ ìˆ˜ì • í•„ìš” ì‹œ, **ì‚¬ìš©ìž ê°ì²´ ì½”ë“œë¥¼ ì§ì ‘ ìˆ˜ì •**í•´ì•¼ í•¨. | ì¸í„°íŽ˜ì´ìŠ¤ ë„ìž… | ì—¬ì „ížˆ ì‚¬ìš©ìž ê°ì²´ê°€ ì˜ì¡´ì„±ì„ `new`ë¡œ ì§ì ‘ ìƒì„±. |
| 2. ì¸í„°íŽ˜ì´ìŠ¤ ì‚¬ìš© | ì˜ì¡´ì„±ì„ ì§ì ‘ ìƒì„±í•˜ì—¬ ì‚¬ìš©í•˜ë¯€ë¡œ, **ë³€ê²½ ì‹œ ìˆ˜ì • í•„ìš”**. | **Factory Pattern** ì ìš© (ì™¸ë¶€ ì£¼ìž…) | ì˜ì¡´ì„±ì„ ì§ì ‘ ìƒì„±í•˜ì§€ ì•Šê³  **ì™¸ë¶€ì—ì„œ ì£¼ìž…**ë°›ìŒ. ìœ ì—°ì„± í™•ë³´. |
| 3. Factory ë³µìž¡ì„± | Factoryë¥¼ êµ¬í˜„í•˜ê³  ê´€ë¦¬í•˜ëŠ” ê²ƒì´ **ë³µìž¡í•˜ê³  ê·€ì°®ìŒ**. | **Spring Framework** ë„ìž… | **POJO** ìž‘ì„±í•˜ë©´ Springì´ ì„¤ì •ì— ë”°ë¼ **ìžë™ìœ¼ë¡œ ë¹ˆì„ ìƒì„± ë° ì£¼ìž…** (**DI**). ì œì–´ì˜ ì—­ì „ (IoC) ë°œìƒ. |


#### âš™ï¸ Springì˜ ë¹ˆ ê´€ë¦¬ ê³¼ì •

1.  **ê°œë°œìž:** POJOë¡œ ë¹ˆ ìž‘ì„±.
2.  **ì „ë‹¬:** ë¹ˆì˜ ìƒì„±/ê´€ê³„ ì„¤ì • ë©”íƒ€ ì •ë³´(â‰ˆ ì„¤ì • íŒŒì¼)ë¥¼ **Spring ì»¨í…Œì´ë„ˆ**ì— ì „ë‹¬.
3.  **ëŸ°íƒ€ìž„:**
    * Springì€ ë©”íƒ€ ì •ë³´ë¡œ **ë¹ˆ ê°ì²´ ìƒì„±** (ì£¼ë¡œ **ì‹±ê¸€í„´** í˜•íƒœ).
    * ë¹ˆ ê´€ê³„ ì •ë³´ì— ë”°ë¼ **ë¹ˆ ì£¼ìž… ì²˜ë¦¬** (DI).

---

## 2. ëª…ì‹œì  DI

### 2-1. ëª…ì‹œì  DI
- **ê°œë°œìžê°€ ì§ì ‘ ë¹ˆ ìƒì„±ê³¼ ì£¼ìž… ê³¼ì •ì„ ëª…ì‹œì ìœ¼ë¡œ ì„¤ì • íŒŒì¼ì— ìž‘ì„±**í•˜ëŠ” ë°©ì‹  

#### ðŸ”– ì£¼ìš” ì–´ë…¸í…Œì´ì…˜ ì •ë¦¬

| ì–´ë…¸í…Œì´ì…˜ | ì„¤ëª… | ì ìš© ìœ„ì¹˜ |
|:-------------|:------|:-----------|
| `@Configuration` | ì´ í´ëž˜ìŠ¤ê°€ **Spring ì„¤ì • íŒŒì¼**ìž„ì„ ëª…ì‹œ. | í´ëž˜ìŠ¤ |
| `@Bean` | ì´ ë©”ì„œë“œê°€ ë°˜í™˜í•˜ëŠ” ê°ì²´ë¥¼ **Spring ë¹ˆìœ¼ë¡œ ë“±ë¡**. | ë©”ì„œë“œ |

#### ë¹ˆ ì„¤ì • ì˜ˆì‹œ ì½”ë“œ
```java
@Configuration // ì—¬ê¸°ëŠ” ì„¤ì • ì •ë³´ê°€ ë‹´ê²¨ìžˆë‹¤
public class WasherConfig {
    @Bean // ë©”ì„œë“œë¥¼ í†µí•´ì„œ ë¹ˆ ìƒì„±
    public SWasher sWasher() { // SWasher íƒ€ìž…ì˜ ë¹ˆ ìƒì„±, ë¹ˆ ì´ë¦„ì€ sWasher
        return new SWasher();  // ì‹¤ì œë¡œ ì‚¬ìš©ë  ë¹ˆ ê°ì²´ ë°˜í™˜
    }

    @Bean
    public LWasher lWasher() {
        return new LWasher();
    }

    @Bean(name = "myWasherUser") // ë¹ˆ ì´ë¦„ì„ myWasherUserë¡œ ì„¤ì •
    public WasherUser washerUser() {
        // return new WasherUser(sWasher());       // ìƒì„±ìžë¥¼ í†µí•œ ë¹ˆ ì£¼ìž…
        WasherUser washerUser = new WasherUser();
        washerUser.setWasher(sWasher());           // WasherUserì˜ setterë¥¼ ì´ìš©í•œ ì£¼ìž…
        return washerUser;
    }
}
```
---

#### ë¹ˆ ì‚¬ìš© ì˜ˆì‹œ ì½”ë“œ

```java
public class WasherUserTest {
    public static void main(String[] args){
        ApplicationContext ctx = new AnnotationConfigApplicationContext(WasherConfig.class); //ì„¤ì • ì •ë³´ë¡œ ì»¨í…Œì´ë„ˆ ìƒì„±

        Washer sWasher = ctx.getBean(SWasher.class);    // SWasher íƒ€ìž…ì˜ ë¹ˆì„ ê°€ì ¸ì˜´

        WasherUser user = ctx.getBean(WasherUser.class); // WahserUser íƒ€ìž…ì˜ ë¹ˆì„ ê°€ì ¸ì˜´
        user.useWahser("ì˜·");

        System.out.println(sWahser==user.getWasher);     // ê°™ì€ ê°ì²´ì¸ì§€ í™•ì¸
    }
}

```
> ë§Œì•½  
> `Washer sWasher = ctx.getBean(Washer.class);`  
> ë¡œ **Washer íƒ€ìž…ì˜ ë¹ˆì„ ê°€ì ¸ì˜¤ë ¤ë©´ ì–´ë–»ê²Œ ë ê¹Œ?**  
>
> ðŸ‘‰ **ì—ëŸ¬ ë°œìƒ!**  
> ì–´ë–¤ ë¹ˆì„ ì¤˜ì•¼ í•˜ëŠ”ì§€(ì—¬ê¸°ì—ì„œëŠ” `SWasher`ì™€ `LWasher`) ì•Œ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ì—ëŸ¬ê°€ ë°œìƒí•¨.  
>
> ë”°ë¼ì„œ **ë™ì¼ íƒ€ìž…ì´ ì—¬ëŸ¿ì¼ ê²½ìš°**,  
> íƒ€ìž… + ì´ë¦„ ê¸°ë°˜ìœ¼ë¡œ ë¹ˆ ì¡°íšŒê°€ ê°€ëŠ¥í•¨ ðŸ‘‡  
>
> `Washer myWasher = ctx.getBean("sWasher", Washer.class);`
---
