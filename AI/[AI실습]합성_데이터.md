# ğŸ“Š í•©ì„± ë°ì´í„° í•™ìŠµ ìš”ì•½

## ğŸ“š ëª©ì°¨

---

## 1. í™˜ê²½ì„¤ì • ë° ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬

### 1-1. í™˜ê²½ ë³€ìˆ˜(OS Environment Variable)

- ìš´ì˜ì²´ì œê°€ í”„ë¡œê·¸ë¨ ì‹¤í–‰ í™˜ê²½ì— ì œê³µí•˜ëŠ” ì „ì—­ ì„¤ì •ê°’
- í”„ë¡œê·¸ë¨ì€ ì´ í™˜ê²½ ë³€ìˆ˜ë¥¼ í†µí•´ ì¤‘ìš”í•œ ì •ë³´(ex. API í‚¤, DB ë¹„ë°€ë²ˆí˜¸)ë¥¼ ì½ì„ ìˆ˜ ìˆìŒ
- .env íŒŒì¼ì„ ë¶ˆëŸ¬ì„œ í™˜ê²½ë³€ìˆ˜ë¡œ ì„¤ì •í•¨

#### ì‚¬ìš©í•˜ëŠ” ì´ìœ ?

1. ë³´ì•ˆ :
   ì½”ë“œ ì•ˆì— ì§ì ‘ ë¹„ë°€ë²ˆí˜¸ë‚˜ API Keyë¥¼ ì ìœ¼ë©´ í‚¤ê°€ ìœ ì¶œë  ìˆ˜ë„ ìˆìŒ, í™˜ê²½ ë³€ìˆ˜ëŠ” ìš´ì˜ì²´ì œ ë©”ëª¨ë¦¬ì—ë§Œ ì €ì¥ë˜ë¯€ë¡œ ì½”ë“œ ì™¸ë¶€ì—ì„œ ì™„ì „í•˜ê²Œ ê´€ë¦¬ ê°€ëŠ¥
2. ìœ ì—°ì„± :
   ê°™ì€ ì½”ë“œë¼ë„, í™˜ê²½ ë³€ìˆ˜ë§Œ ë°”ê¾¸ë©´ ë‹¤ë¥¸ API í‚¤ë‚˜ ì„¤ì • ì‚¬ìš© ê°€ëŠ¥, ì½”ë“œ ìˆ˜ì • ì—†ì´ í™˜ê²½ ë³€ìˆ˜ë§Œ ë°”ê¾¸ë©´ ë¨

---

### 1-2. httpx

- Pythonìš© ì°¨ì„¸ëŒ€ HTTP í´ë¼ì´ì–¸íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬
- ìœ ëª…í•œ requests ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ API ìŠ¤íƒ€ì¼ ê³„ìŠ¹
- **ë¹„ë™ê¸°(Async)**ì™€ HTTP/2ë¥¼ ì§€ì›í•˜ë„ë¡ ì„¤ê³„ë¨
- `async with httpx.AsyncClient() as client:`ì„ ì‚¬ìš©í•˜ì—¬ RESET API ë°©ì‹ìœ¼ë¡œ ë¹„ë™ê¸°ì  í˜¸ì¶œ

#### ì‚¬ìš©í•˜ëŠ” ì´ìœ ?

> **ë¹„ë™ê¸° í†µì‹ **ì„ í•˜ê¸° ìœ„í•¨

1. ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ í”„ë¡œê·¸ë¨ì´ ë©ˆì¶”ì§€ ì•Šê³  ë‹¤ë¥¸ ì‘ì—…ì„ ë³‘ë ¬ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŒ
2. ë¹„ë™ê¸° API í˜¸ì¶œì„ í•˜ê²Œ ë˜ë©´ ì½”ë“œìƒì—ì„œ ì—¬ëŸ¬ APIë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆìŒ

```python
import httpx

async def call_chat_completion(url: str, headers: dict, payload: dict):
        async with httpx.AsyncClient(timeout=30.0) as client :
            response = await client.post(url, headers=headers, json=payload) # await! ì‘ë‹µ ë°›ì•„ì˜¬ ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ì
            response.rasie_for_status()
            data = response.json()

            return data["choices"][0]["message"]["content"]
```

### 1-3. response_format - JSON

- í”„ë¡¬í”„íŠ¸ì— ê²°ê³¼ë¬¼ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ output_formatì„ ì„¤ì •

  | ë°©ì‹                                     | ì„¤ëª…                                        | ì¥ì                           | ë‹¨ì                         |
  | ---------------------------------------- | ------------------------------------------- | ----------------------------- | --------------------------- |
  | **í”„ë¡¬í”„íŠ¸ì— JSON í˜•ì‹ ì§€ì‹œ**            | â€œì´ëŸ° JSON í˜•íƒœë¡œ ë‹µí•´ì¤˜â€ë¼ê³  ë§ë¡œ ì§€ì‹œ     | ì„¤ì •ì´ ê°„ë‹¨í•¨                 | í˜•ì‹ ê¹¨ì§ˆ ìˆ˜ ìˆì–´ íŒŒì‹± í•„ìš” |
  | **`response_format`ì— JSON schema ì§€ì •** | ëª¨ë¸ì´ ì§€ì •ëœ êµ¬ì¡°ì˜ JSONë§Œ ì¶œë ¥í•˜ë„ë¡ ê°•ì œ | ê²°ê³¼ê°€ ì•ˆì •ì ì´ê³  íŒŒì‹± ë¶ˆí•„ìš” | ì´ˆê¸° ì„¤ì •ì´ ì¡°ê¸ˆ ë³µì¡       |

#### ğŸ“Œ ì •ë¦¬:

> ëª¨ë¸ì´ JSONì„ ì•ˆì •ì ìœ¼ë¡œ ì¶œë ¥í•˜ê¸¸ ì›í•œë‹¤ë©´ **response_format**ì„ ì“°ëŠ” ê²ƒì´ ì¢‹ìŒ
> ë¹ ë¥´ê²Œ í…ŒìŠ¤íŠ¸í•  ë•ŒëŠ” í”„ë¡¬í”„íŠ¸ ì§€ì‹œ ë°©ì‹ë„ ê°€ëŠ¥

```python
from openai import OpenAI
import json

client = OpenAI()

messages = [
    {
        "role": "system",
        "content": "You are an expert in news information extraction. Extract key information and summarize the article."
    },
    {
        "role": "user",
        "content": """
        <article>
            <h1>Apple launches new iPhone 16 with AI features</h1>
            <p>Apple has unveiled the iPhone 16, featuring advanced AI-driven camera capabilities and improved battery life.
            The device will be available for pre-order on October 25, with prices starting at $999.</p>
            <p>CEO Tim Cook highlighted that this release marks a major step forward in integrating AI into everyday mobile experiences.</p>
        </article>
        """
    }
]

response_format = {
    "type": "json_schema",
    "json_schema": {
        "name": "news_article_summary",
        "strict": True,
        "schema": {
            "type": "object",
            "properties": {
                "headline": {
                    "type": "string",
                    "description": "The main title of the news article."
                },
                "summary": {
                    "type": "string",
                    "description": "A concise summary of the article content."
                },
                "published_date": {
                    "type": "string",
                    "description": "The date when the article or event is mentioned (if available)."
                },
                "price_start": {
                    "type": "number",
                    "description": "The starting price mentioned in the article, if any."
                },
                "key_points": {
                    "type": "array",
                    "items": {
                        "type": "string",
                        "description": "Main takeaways from the article."
                    }
                }
            },
            "required": ["headline", "summary", "key_points"]
        }
    }
}

response = client.chat.completions.create(
    model="gpt-4.1-mini",
    messages=messages,
    response_format=response_format
)

structured_output = response.choices[0].message.content
print("í˜„ì¬ ì‘ë‹µì˜ í˜•ì‹:", type(structured_output))
print(structured_output)

structured_dict = json.loads(structured_output)
print("êµ¬ì¡°í™”ëœ ì‘ë‹µì˜ í˜•ì‹:", type(structured_dict))
print(structured_dict)
```

#### ğŸ“˜ ê²°ê³¼ ë¹„êµ ì •ë¦¬

- `structured_output` :
  ğŸ‘‰ ëª¨ë¸ì´ ë°˜í™˜í•œ JSON í˜•íƒœì˜ í…ìŠ¤íŠ¸(string)
  (ë”°ì˜´í‘œë¡œ ê°ì‹¸ì§„ ê¸€ì ë©ì–´ë¦¬)
- `structured_dictionary` :
  ğŸ‘‰ ê·¸ í…ìŠ¤íŠ¸ë¥¼ json.loads()ë¡œ ë³€í™˜í•´ì„œ ì–»ì€ ì‹¤ì œ JSON ë°ì´í„° êµ¬ì¡°(dict)
  (ì´ì œ í‚¤ë¡œ ì ‘ê·¼ ê°€ëŠ¥ â€” ì˜ˆ: structured_dictionary["headline"])

---

## 2. í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§(Prompt Engineering)

### 2-1. í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§

- AI ëª¨ë¸ì—ê²Œ ì›í•˜ëŠ” ë‹µì„ ì •í™•í•˜ê³  íš¨ìœ¨ì ìœ¼ë¡œ ì´ëŒì–´ë‚´ê¸° ìœ„í•´ì„œ ì…ë ¥(í”„ë¡¬í”„íŠ¸)ì„ ì„¤ê³„-ìµœì í™”í•˜ëŠ” ê¸°ìˆ ì„ ë§í•¨

#### íŠ¹ì§•

1. ëª¨ë¸ì˜ ì„±ëŠ¥ì— í¬ê²Œ ì˜í–¥ì„ ì¤Œ
   - AI ëª¨ë¸ì€ ì§ˆë¬¸(í”„ë¡¬í”„íŠ¸)ì— ë”°ë¼ ê°™ì€ ë°ì´í„°ë¼ë„ ì™„ì „íˆ ë‹¤ë¥¸ ë‹µì„ ë‚´ë†“ìŒ
2. í”„ë¡¬í”„íŠ¸ì˜ ê¸°ë³¸ êµ¬ì¡° í•˜ë‚˜ì˜ í”„ë¡¬í”„íŠ¸ëŠ” ë³´í†µ ë‹¤ìŒ ìš”ì†Œë“¤ë¡œ êµ¬ì„±ë¨
   - ì—­í• (Role) ì„¤ì • : AIì˜ **_"ì •ì²´ì„±"_**ê³¼ **_"ê´€ì "_**ì„ ì§€ì •
   - ëª©í‘œ(Task) ëª…í™•í™” : ë¬´ì—‡ì„ í•´ì•¼ í•œëŠì§€ êµ¬ì²´ì ìœ¼ë¡œ ì§€ì‹œ
   - ì¡°ê±´(Constraints) ë¶€ì—¬ : ë‹µë³€ ê¸¸ì´, í˜•ì‹, ì–¸ì–´, ìŠ¤íƒ€ì¼ ë“± ì œí•œì‚¬í•­ì„ ëª…ì‹œ
   - ì˜ˆì‹œ(Examples) ì œê³µ : ì›í•˜ëŠ” ë‹µë³€ íŒ¨í„´ì„ ë³´ì—¬ì£¼ë©´ AIê°€ ë¹„ìŠ·í•˜ê²Œ ë‹µë³€
3. ì¢‹ì€ í”„ë¡¬í”„íŠ¸ ì‘ì„± ì›ì¹™ :
   - ëª…í™•ì„±
   - ë§¥ë½ ì œê³µ
   - ì¶œë ¥ í˜•ì‹ ì§€ì •
   - ì˜ˆì‹œ ì œì‹œ
   - ì ì§ì „ ìš”ì²­(ë³µì¡í•œ ë¬¸ì œëŠ” ë‹¨ê³„ë³„ë¡œ ìª¼ê°œì„œ ìš”ì²­)

```python
RECIPE_SYSTEM_PROMPT = """ë‹¹ì‹ ì€ ì „ ì„¸ê³„ ìš”ë¦¬ì— ì •í†µí•œ ì…°í”„ 'ì¿ í‚¹ ë§ˆìŠ¤í„°'ì…ë‹ˆë‹¤.
ì‚¬ìš©ìì˜ ìš”ì²­ì— ë”°ë¼ ìƒí™©ì— ë§ëŠ” ìš”ë¦¬ë¥¼ í•˜ë‚˜ë§Œ ì¶”ì²œí•©ë‹ˆë‹¤.

{rule}

ì¶”ì²œ ì‹œ ë°˜ë“œì‹œ ìš”ë¦¬ ì´ë¦„, ì£¼ìš” ì¬ë£Œ, ì¶”ì²œ ì´ìœ ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.
"""

# TODO: ì•„ë˜ ë‘ ê°€ì§€ ê·œì¹™ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì—¬ ì§€ì‹œì‚¬í•­ì„ ì™„ì„±í•˜ì„¸ìš”.
# ê·œì¹™ A (ì „ë¬¸ ì…°í”„ ëª¨ë“œ): ì „ë¬¸ ìš”ë¦¬ ìš©ì–´ë¥¼ ì‚¬ìš©í•˜ê³ , ì¬ë£Œì˜ ì¡°í™”ë‚˜ ì¡°ë¦¬ë²•ì˜ ê³¼í•™ì  ì›ë¦¬ë¥¼ í•¨ê»˜ ì„¤ëª…í•´ì£¼ì„¸ìš”.
# ê·œì¹™ B (ì¹œêµ¬ ëª¨ë“œ): í¸ì•ˆí•˜ê³  ìœ ì¾Œí•œ ë§íˆ¬ë¡œ, ì™œ ì´ ìš”ë¦¬ê°€ ë§›ìˆëŠ”ì§€ ì‰½ê²Œ ì„¤ëª…í•´ì£¼ì„¸ìš”.
rule = "ê·œì¹™ B (ì¹œêµ¬ ëª¨ë“œ): í¸ì•ˆí•˜ê³  ìœ ì¾Œí•œ ë§íˆ¬ë¡œ, ì™œ ì´ ìš”ë¦¬ê°€ ë§›ìˆëŠ”ì§€ ì‰½ê²Œ ì„¤ëª…í•´ì£¼ì„¸ìš”."

from openai import OpenAI

client = OpenAI(
    api_key=UPSTAGE_API_KEY,
    base_url="https://api.upstage.ai/v1"
)

response = client.chat.completions.create(
    model="solar-pro2",
    messages=[
        {
            "role": "system",
            "content": RECIPE_SYSTEM_PROMPT.format(rule=rule)
        },
        {
            "role": "user",
            "content": "ì˜¤ëŠ˜ê°™ì´ ë¹„ ì˜¤ëŠ” ë‚  ë¨¹ê¸° ì¢‹ì€ ìš”ë¦¬ ì¶”ì²œí•´ì¤˜"
        }
    ]
)

output = response.choices[0].message.content
print(output)
```

#### ê·œì¹™ A ê²°ê³¼

```text
[21]
5ì´ˆ
# ê·œì¹™ B (ì¹œêµ¬ ëª¨ë“œ): í¸ì•ˆí•˜ê³  ìœ ì¾Œí•œ ë§íˆ¬ë¡œ, ì™œ ì´ ìš”ë¦¬ê°€ ë§›ìˆëŠ”ì§€ ì‰½ê²Œ ì„¤ëª…í•´ì£¼ì„¸ìš”.
rule = "ê·œì¹™ A (ì „ë¬¸ ì…°í”„ ëª¨ë“œ): ì „ë¬¸ ìš”ë¦¬ ìš©ì–´ë¥¼ ì‚¬ìš©í•˜ê³ , ì¬ë£Œì˜ ì¡°í™”ë‚˜ ì¡°ë¦¬ë²•ì˜ ê³¼í•™ì  ì›ë¦¬ë¥¼ í•¨ê»˜ ì„¤ëª…í•´ì£¼ì„¸ìš”."

from openai import OpenAI

client = OpenAI(
    api_key=UPSTAGE_API_KEY,
    base_url="https://api.upstage.ai/v1"
)


**ìš”ë¦¬ëª…: ì˜¤ë¦¬ ì½©í”¼(Canard Ã  la Confit)ì™€ ë ˆë“œ ì™€ì¸ ê°ì í“Œë ˆ**

### **ì£¼ìš” ì¬ë£Œ**
- **ì˜¤ë¦¬ ë‹¤ë¦¬** (í”¼ë¶€ í¬í•¨, ì§€ë°©ê³¼ ì ¤ë¼í‹´ì´ í’ë¶€í•œ ë¶€ìœ„)
- **ì˜¤ë¦¬ ì§€ë°©** (ìì²´ ì¶”ì¶œ ë˜ëŠ” ê±°ìœ„ ì§€ë°© ëŒ€ì²´)
- **í—ˆë¸Œ ë¯¹ìŠ¤** (ë¡œì¦ˆë§ˆë¦¬, íƒ€ì„, ì„¸ì´ì§€, ì›”ê³„ìˆ˜ ì)
- **ë§ˆëŠ˜** (í†µë§ˆëŠ˜, ìºëŸ¬ë©œë¼ì´ì§• íš¨ê³¼)
- **ë ˆë“œ ì™€ì¸ ê°ì í“Œë ˆ** (ê°ì, ìƒí¬ë¦¼, ë ˆë“œ ì™€ì¸ ë¦¬ë•ì…˜)
- **ì–‘íŒŒ, ë‹¹ê·¼** (ë¸Œë¼ì¦ˆë§ìš©, ë¯¸ë Œí¬ì•„)

---

### **ì¶”ì²œ ì´ìœ  (ê³¼í•™ì /ìš”ë¦¬í•™ì  ê·¼ê±°)**
1. **ë¹„ ì˜¤ëŠ” ë‚ ê³¼ ì˜¤ë¦¬ ì½©í”¼ì˜ ì‹œë„ˆì§€**
   - ì˜¤ë¦¬ ì§€ë°©ì€ **ì €ì˜¨ ì¥ì‹œê°„ ì¡°ë¦¬(65~75Â°C)**ë¡œ ë¶„í•´ë˜ë©°, **ì˜¬ë ˆì˜¤ì‚°**ì´ í’ë¶€í•´ ì…ì•ˆì— ë¶€ë“œëŸ¬ìš´ ê°ì´‰ì„ ë‚¨ê¹ë‹ˆë‹¤. ì´ëŠ” ìŠµë„ ë†’ì€ ë‚  ìš°ìš¸ê°ì„ ì™„í™”í•˜ëŠ” **ì´‰ê°ì  ë§Œì¡±ê°**ì„ ì œê³µí•©ë‹ˆë‹¤.
   - ë ˆë“œì™€ì¸ ê°ì í“Œë ˆì˜ **í´ë¦¬í˜ë†€**ê³¼ ì˜¤ë¦¬ ê³ ê¸°ì˜ **ì² ë¶„**ì€ ì²´ë‚´ ì—´ìƒì„±ì„ ì´‰ì§„í•´ ì²´ì˜¨ ìœ ì§€ì— ë„ì›€ì„ ì¤ë‹ˆë‹¤.

2. **ì¡°ë¦¬ë²•ì˜ í™”í•™ì  ì›ë¦¬**
   - ì˜¤ë¦¬ë¥¼ ì§€ë°©ì— **ì§„ê³µ ì¡°ë¦¬(Sous-vide)**í•˜ë©´ **ë¯¸ì˜¤ì‹  ë‹¨ë°±ì§ˆ**ì´ ì„œì„œíˆ ë³€ì„±ë˜ì–´ ì—°ë„ê°€ ê·¹ëŒ€í™”ë©ë‹ˆë‹¤.
   - ë ˆë“œ ì™€ì¸ ë¦¬ë•ì…˜ì€ **ë‹¹-ì•„ë¯¸ë…¸ì‚° ë°˜ì‘(ë©”ì¼ë¼ë“œ ë°˜ì‘)**ìœ¼ë¡œ ê¹Šì€ ìš°ë§ˆë¯¸ë¥¼ ìƒì„±í•˜ë©°, ê°ìì˜ **ì•„ë°€ë¡œí™í‹´**ê³¼ ê²°í•©í•´ í¬ë¦¬ë¯¸í•œ í…ìŠ¤ì²˜ë¥¼ ì™„ì„±í•©ë‹ˆë‹¤.

3. **í–¥ë¯¸ ì¡°í™”ì˜ ì‹¬ë¦¬í•™**
   - ì˜¤ë¦¬ì˜ **í’ë¶€í•œ ì§€ë°©ì‚°**ê³¼ í—ˆë¸Œì˜ **í…Œë¥´íœ í™”í•©ë¬¼**ì€ ë¹„ ëƒ„ìƒˆ(í˜íŠ¸ë¦¬ì½” í™”í•©ë¬¼)ì™€ ìƒì‡„ë˜ëŠ” í–¥ë¯¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
   - ë”°ëœ»í•œ ìš”ë¦¬ì—ì„œ ë°œìƒí•˜ëŠ” **ìˆ˜ì¦ê¸°**ê°€ í›„ê° ìˆ˜ìš©ì²´ë¥¼ ìê·¹í•´ ì‹ìš•ì„ ì´‰ì§„í•©ë‹ˆë‹¤.

---

**ì¶”ê°€ TIP**
- ì˜¤ë¦¬ ì½©í”¼ëŠ” **24ì‹œê°„ ìˆ™ì„±**í•˜ë©´ ê·¼ìœ¡ ë‚´ **ì¹¼íŒ©ì‹  íš¨ì†Œ**ê°€ ë‹¨ë°±ì§ˆì„ ì¶”ê°€ë¡œ ë¶„í•´í•´ ë” ë¶€ë“œëŸ¬ì›Œì§‘ë‹ˆë‹¤.
- ê°ì í“Œë ˆì— **ì¹´ì˜Œ í˜í¼** í•œ ê¼¬ì§‘ì„ ì²¨ê°€í•˜ë©´ ë¯¸ëŸ‰ì˜ **ìº¡ì‚¬ì´ì‹ **ì´ ì²´ì˜¨ì„ ì¼ì‹œì ìœ¼ë¡œ ì˜¬ë ¤ ì¾Œì í•¨ì„ ìœ ì§€í•©ë‹ˆë‹¤.

ë¹„ ì˜¤ëŠ” ë‚ ì˜ ë¬´ê¸°ë ¥í•¨ì„ íƒ€íŒŒí•  **í’ë¯¸ ê°€ë“í•œ í”„ë‘ìŠ¤ ë‚¨ë¶€ì‹ ìš”ë¦¬**ë¡œ ì¶”ì²œí•©ë‹ˆë‹¤. ğŸŒ§ï¸ğŸ·
```

#### ê·œì¹™ B ê²°ê³¼

```text
**ì¶”ì²œ ìš”ë¦¬: ê°ìì „**

**ì£¼ìš” ì¬ë£Œ:**
ê°ì, ë¶€ì¹¨ê°€ë£¨, ì†Œê¸ˆ, íŒŒ, ì‹ìš©ìœ 

**ì¶”ì²œ ì´ìœ :**
ì˜¤ëŠ˜ì€ ë¹„ ì˜¤ëŠ” ë‚ ì´ë‹ˆê¹Œ~ **ê°ìì „**ì²˜ëŸ¼ ë°”ì‚­í•˜ê³  ë”°ëˆí•œ ìš”ë¦¬ê°€ ë”±ì´ì—ìš”! ğŸŒ§ï¸ğŸ¥Ÿ
- ê°ìëŠ” ë¹„ ì˜¤ëŠ” ë‚  í—ˆí•œ ì†ì„ ì±„ì›Œì£¼ëŠ” ë“ ë“ í•œ íƒ„ìˆ˜í™”ë¬¼ ì¹œêµ¬ëë‹ˆë‹¤.
- ì–‡ê²Œ ë¶€ì³ì„œ ë°”ì‚­í•œ ì‹ê°ê³¼ ì«„ê¹ƒí•œ ì†ì‚´ì´ ì¡°í™”ë˜ì–´, ë¹„ ëƒ„ìƒˆì™€ ì–´ìš¸ë¦¬ëŠ” ê³ ì†Œí•¨ì„ ì„ ì‚¬í•´ìš”.
- íŒŒë¥¼ ì†¡ì†¡ ì°ì–´ ë„£ìœ¼ë©´ í–¥ê¸‹í•¨ì´ ë”í•´ì ¸ì„œ í•œ ì¥ì”© ì§‘ì–´ë¨¹ê¸° ì¢‹ì•„ìš”.
- ê²Œë‹¤ê°€ ë§Œë“œëŠ” ë²•ë„ ê°„ë‹¨í•´ì„œ, ë¹„ ì˜¬ ë•Œ ì§‘ì—ì„œ í¸í•˜ê²Œ ë§Œë“¤ê¸° ë”±ì´ì£ !

"ë¹„ ì˜¤ëŠ” ë‚ ì—ëŠ” ê°ìì „ í•œ ì¥, ê¹€ì¹˜ë‘ ê°™ì´ ì‹¸ë¨¹ìœ¼ë©´ ì„¸ìƒ í–‰ë³µí•´ì ¸ìš”!" â˜”ï¸ğŸ˜Š
```

#### ğŸ“˜ ê²°ê³¼ ë¹„êµ ì •ë¦¬

> ê·œì¹™ì— ë”°ë¼ ë§íˆ¬ì™€ ë‹µë³€ì˜ í€„ë¦¬í‹°, ë‚´ìš© ë“±ì´ ë‹¬ë¼ì§€ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŒ

---

### 2-2. í•©ì„± ë°ì´í„°(Synthetic Data)

- ì‹¤ì œ ì„¸ìƒì—ì„œ ìˆ˜ì§‘í•œ ë°ì´í„°ê°€ ì•„ë‹ˆë¼, ì¸ê³µì ìœ¼ë¡œ ë§Œë“¤ì–´ë‚¸ ë°ì´í„°
- í•©ì„± ë°ì´í„°ëŠ” ì‹¤ì œ ë°ì´í„°ì™€ ìœ ì‚¬í•˜ê²Œ ë§Œë“¤ì–´ì•¼ í•¨
- í•©ì„± ë°ì´í„°ë¥¼ ë¬´ìˆ˜íˆ ë§Œë“¤ë”ë¼ë„ ë¹„ìŠ·í•œ ë°ì´í„°ë§Œ ë§ì´ ë§Œë“¤ë©´ í•™ìŠµì˜ íš¨ìœ¨ì„±ì´ ë–¨ì–´ì§
  -> ë‹¤ì–‘ì„±ì„ ë†’ì—¬ì£¼ëŠ” `temperature`ê°’ì„ ì¡°ì ˆí•¨(`temperature=0.0`ì´ë©´ ë‹¤ì–‘ì„±ì´ ë§¤ìš° ë‚®ì€ ê²ƒì„ ì˜ë¯¸)
  -> ì¤‘ë³µë˜ëŠ” ë°ì´í„° ë“± ë¶ˆí•„ìš”í•œ ë°ì´í„°ê°€ ìƒê¸¸ ìˆ˜ ìˆìœ¼ë¯€ë¡œ í•„í„°ë§ í•¨ìˆ˜ ì¶”ê°€ë¡œ ì‚¬ìš©

#### ëª©ì 

1. ë°ì´í„° ë¶€ì¡± ë¬¸ì œ í•´ê²°
   - ìƒˆë¡œìš´ AI ëª¨ë¸ì„ ë§Œë“¤ ë•Œ, í•„ìš”í•œ ë°ì´í„°ê°€ ë¶€ì¡±í•  ìˆ˜ ìˆìŒ
2. ë¹„ìš© ì ˆê°
   - ì‹¤ì œ ë°ì´í„°ë¥¼ ìˆ˜ì§‘-ê°€ê³µí•˜ëŠ” ë°ëŠ” ë§ì€ ì‹œê°„ê³¼ ëˆì´ ë“¦
   - í•©ì„± ë°ì´í„°ëŠ” ì»´í“¨í„°ë¡œ ë¹ ë¥´ê³  ì €ë ´í•˜ê²Œ ìƒì„± ê°€ëŠ¥
3. ê°œì¸ì •ë³´ ë³´í˜¸
   - ì˜ë£Œ ê¸°ë¡, ê¸ˆìœµ ê±°ë˜ì²˜ëŸ¼ ë¯¼ê°í•œ ì •ë³´ëŠ” ì§ì ‘ ì‚¬ìš©í•˜ê¸° ì–´ë µ
   - í•©ì„± ë°ì´í„°ëŠ” ì‹¤ì œ ì‚¬ëŒì˜ ê°œì¸ì •ë³´ë¥¼ í¬í•¨í•˜ì§€ ì•Šìœ¼ë©´ì„œë„, í†µê³„ì ìœ¼ë¡œ ë¹„ìŠ·í•œ íŠ¹ì„±ì„ ê°€ì§ˆ ìˆ˜ ìˆìŒ
4. ë‹¤ì–‘í•œ ìƒí™© í…ŒìŠ¤íŠ¸
   - ì‹¤ì œë¡œëŠ” ë“œë¬¼ê²Œ ë°œìƒí•˜ëŠ” ì‚¬ê±´ì„ AIê°€ í•™ìŠµí•  ìˆ˜ ìˆë„ë¡ ë¯¸ë¦¬ ë§Œë“¤ì–´ í•™ìŠµ-í…ŒìŠ¤íŠ¸ ê°€ëŠ¥

#### ì£¼ì˜

> ì›ë³¸ ë°ì´í„°ì˜ íŒ¨í„´ì„ ì°¸ê³ í•´ ë¹„ìŠ·í•œ êµ¬ì¡°ì˜ ê°€ì§œ ë°ì´í„°(í•©ì„± ë°ì´í„°)â€™ë¥¼ ë§Œë“¤ì–´ ë‹¬ë¼ê³  í”„ë¡¬í”„íŠ¸ì—ì„œ ìš”ì²­í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ìƒì„±
> ì¦‰, ê·¸ëƒ¥ "ì›ë˜ ë°ì´í„°ë¡œ í•©ì„± ë°ì´í„° ë§Œë“¤ì–´ì¤˜"ë¼ê³ ë§Œ í•˜ë©´ ì•ˆ ë˜ê³ 
> **â€œíŒ¨í„´ì„ ì°¸ê³ í•˜ë˜ ì‹¤ì œ ë°ì´í„°ëŠ” í¬í•¨í•˜ì§€ ë§ë¼â€**ê³  ëª…í™•íˆ ì ì–´ì•¼ í•¨

```python
# TODO: SYSTEM PROMPTë¥¼ ì‘ì„±í•˜ì„¸ìš”
SYNTHETIC_DATA_SYSTEM_PROMPT = """
You are a structured synthetic data generator.
Your task is to always output JSON strictly following this schema:
{{
  "intent": "ì˜í™” ë¦¬ë·° ìƒì„±",
  "items": [
    {{
      "title": "<ì˜í™” ì œëª©>",
      "description": "<ì§§ì€ ë¦¬ë·° ë‚´ìš©>",
      "additional_info": "<ì„ íƒì  ì¶”ê°€ ì •ë³´ (ì˜ˆ: í‰ì , ì¥ë¥´ ë“±)>"
    }}
  ]
}}

{rule}
- Never include text outside of JSON.
- Always provide at least 5 items.
- Ensure valid JSON syntax.
- The data must be synthetic (not copied from real examples).
- Follow the structure and style of typical movie reviews.
"""

rule = "Generate synthetic movie review data with fictional movie titles and reviews."

response = client.chat.completions.create(
    model="solar-pro2",
    messages=[
        {
            "role": "system",
            "content": SYNTHETIC_DATA_SYSTEM_PROMPT.format(rule=rule)
        },
        {
            "role": "user",
            "content": "Please create 5 synthetic movie reviews following the given structure."
        }
    ],
    temperature=1.0,
)

output = response.choices[0].message.content

# JSON ë¬¸ìì—´ì„ íŒŒì´ì¬ ê°ì²´ë¡œ ë³€í™˜
structured_dictionary = json.loads(output)

print("êµ¬ì¡°í™”ëœ ì‘ë‹µì˜ í˜•ì‹: ", type(structured_dictionary))
print(json.dumps(structured_dictionary, indent=2))
```

---

### 2-3. í•©ì„± ë°ì´í„° í‰ê°€(LLM as a Judge)

- ì‚¬ëŒ ëŒ€ì‹  LLM ëª¨ë¸ì„ ì´ìš©í•˜ì—¬ ì •ì„ì ì¸ ê²°ê³¼ë¬¼ì„ í‰ê°€í•˜ëŠ” ê²ƒ

#### ì‚¬ìš© ì´ìœ 

- ìë™ ì±„ì  : ì‚¬ëŒì´ ì§ì ‘ ì±„ì í•˜ì§€ ì•Šì•„ë„ LLMì´ ë¨¼ì € í‰ê°€ë¥¼ ë„ì™€ì¤„ ìˆ˜ ìˆìŒ
- í”¼ë“œë°± ì œê³µ : ë‹¨ìˆœíˆ ì ìˆ˜ë§Œ ì œê³µí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì„¤ëª…ê¹Œì§€ ë§ë¶™ì¼ ìˆ˜ ìˆìŒ
- ì¼ê´€ì„± ìˆëŠ” í‰ê°€ : ë¹ ë¥´ê³  ì¼ê´€ì„± ìˆê²Œ ë‹µì„ í‰ê°€í•  ìˆ˜ ìˆìŒ

#### ì‚¬ìš© ì›ì¹™

> LLMë„ ì™„ë²½í•˜ì§€ ì•Šì•„ì„œ ì˜ëª»ëœ í‰ê°€ë¥¼ í•  ìˆ˜ ìˆìŒ! ë”°ë¼ì„œ ë‹¤ì–‘í•œ ì›ì¹™ì„ ì§€ì¼œì•¼ í•¨

1. í‰ê°€ì ëª¨ë¸ì€ ì¶”ë¡ ì— ì‚¬ìš©í•œ ëª¨ë¸ë³´ë‹¤ ë” í° ëª¨ë¸ì„ ì‚¬ìš©í•´ì•¼ í•¨
2. ì¶”ë¡ ì— ì‚¬ìš©í•œ ëª¨ë¸ê³¼ í‰ê°€ì ëª¨ë¸ì´ ê°™ì„ ê²½ìš° í˜¸ì˜ì ì¸ í‰ê°€ë¥¼ ë‚´ë¦¬ëŠ” biasê°€ ë°œìƒí•˜ë¯€ë¡œ ë‹¤ë¥¸ ëª¨ë¸ë¡œ ì‚¬ìš©í•´ì•¼ í•¨
3. í‰ê°€ ê²°ê³¼ë¬¼ì€ ì ìˆ˜(score)ì™€ ì´ìœ (reason)ë¡œ êµ¬ì„±ë¨, reasonì„ ìƒì„±í•˜ê²Œ í•¨ìœ¼ë¡œì¨ ëª¨ë¸ì´ ì¢€ë” ì •í™•í•œ í‰ê°€ë¥¼ í•˜ê²Œ ë§Œë“¦
4. í‰ê°€ ê²°ê³¼ë¬¼ì´ ì¼ê´€ë˜ë„ë¡ temperatureë¥¼ 0ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.

````python
# ìë™ í‰ê°€ìš© ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ (ìŒì‹ ì¶”ì²œ ë²„ì „)
JUDGE_SYSTEM_PROMPT_FOOD = """ë‹¹ì‹ ì˜ ì—­í• ì€ ëª¨ë¸ ë‹µë³€ ìë™ í‰ê°€ìì…ë‹ˆë‹¤. ì…ë ¥ í”„ë¡¬í”„íŠ¸ì™€ ëª¨ë¸ ë‹µë³€ì„ ë³´ê³ , í‰ê°€ ê¸°ì¤€ì— ë”°ë¼ ëª¨ë¸ ë‹µë³€ì„ í‰ê°€í•©ë‹ˆë‹¤.

## 1. ì…ë ¥ í˜•ì‹
    - ì…ë ¥ í”„ë¡¬í”„íŠ¸: [instruction]
    - ëª¨ë¸ ë‹µë³€: [output]
    - í‰ê°€ ê¸°ì¤€: [criteria]

## 2. ì‘ì—… ì§€ì‹œ
    - [instruction]ì— ë”°ë¥¸ ëª¨ë¸ ê²°ê³¼ë¬¼ì¸ [output]ì„ í‰ê°€í•©ë‹ˆë‹¤.
    - [output]ì€ [criteria]ë¥¼ ì¶©ì¡±í•˜ëŠ”ì§€ í‰ê°€í•©ë‹ˆë‹¤.

## 3. ì±„ì  ì›ì¹™ (ê° ê¸°ì¤€ë³„ 1â€“5ì , ì •ìˆ˜ë§Œ)
    - 5ì  (íƒì›”): ê¸°ì¤€ì„ ì™„ì „íˆ ì¶©ì¡±. ì˜¤ë¥˜Â·ëˆ„ë½ ì—†ìŒ. êµ¬ì²´ì ì´ê³  ì‹¤í–‰ê°€ëŠ¥.
    - 4ì  (ìš°ìˆ˜): ëŒ€ì²´ë¡œ ì¶©ì¡±. ì‚¬ì†Œí•œ í ë§Œ ìˆìŒ.
    - 3ì  (ë³´í†µ): í•µì‹¬ì€ ë§ì§€ë§Œ ëˆˆì— ë„ëŠ” ì•½ì  ì¡´ì¬.
    - 2ì  (ë¯¸í¡): ì¤‘ìš”í•œ ìš”êµ¬ë¥¼ ì—¬ëŸ¬ ê³³ì—ì„œ ë†“ì¹¨ ë˜ëŠ” ì˜¤ë¥˜/ë¹„ë…¼ë¦¬ ë‹¤ìˆ˜.
    - 1ì  (ë¶€ì í•©): ì „ë°˜ì ìœ¼ë¡œ ìš”ì²­ê³¼ ì–´ê¸‹ë‚¨, ì˜ë¯¸ìˆëŠ” ë„ì›€/ê·¼ê±° ì—†ìŒ.

## 3. ì¶œë ¥ í˜•ì‹ (ì—„ê²© ì¤€ìˆ˜)
    - "score"ëŠ” 1â€“5ì ì˜ ì •ìˆ˜ë¡œ í‰ê°€í•œë‹¤.
    - "comment"ëŠ” í•œêµ­ì–´ 1â€“3ë¬¸ì¥ìœ¼ë¡œ í‰ê°€í•œë‹¤. êµ¬ì²´ì ì´ê³  ì‹¤í–‰ ê°€ëŠ¥í•˜ê²Œ ì‘ì„±í•œë‹¤.
    - ì¶œë ¥ í˜•ì‹ì€ JSON í˜•ì‹ì¸ <output_format>ì„ ì¤€ìˆ˜í•œë‹¤.

<output_format>
```json
{{
    "score": [ëª¨ë¸ì˜ ë‹µë³€ í‰ê°€ ì ìˆ˜],
    "comment": [í‰ê°€ ì£¼ì„]
}}
```"""
USER_PROMPT = """- ì…ë ¥ í”„ë¡¬í”„íŠ¸: {instruction}
- ëª¨ë¸ ë‹µë³€: {output}
- í‰ê°€ ê¸°ì¤€: {criteria}
"""

instruction = STRUCTURED_GENERATOR_SYSTEM_PROMPT.format(rule=rule)
# TODO: ê¸°ì¤€ì„ ì •ì˜í•´ì£¼ì„¸ìš”
criteria = "ìš”ì²­ì˜ ì¶©ì‹¤ë„"

print(USER_PROMPT.format(instruction=instruction, output=output, criteria=criteria))

messages = [
        {
            "role": "system",
            "content": JUDGE_SYSTEM_PROMPT
        },
        {
            "role": "user",
            "content": USER_PROMPT.format(instruction=instruction, output=output, criteria=criteria)
        }
]

response = client.chat.completions.create(
    model="solar-pro2",
    messages=messages
)

llm_as_judge_output = response.choices[0].message.content
llm_as_judge_structured_dictionary = json_parsing(llm_as_judge_output)
print("êµ¬ì¡°í™”ëœ ì‘ë‹µì˜ í˜•ì‹: ", type(llm_as_judge_structured_dictionary))
print(llm_as_judge_structured_dictionary)
````
